<!doctype html>
<html class="no-js">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="/_assets/v0.9.x/screen.css" type="text/css" media="screen">
  <link rel="stylesheet" href="/_assets/v0.9.x/print.css" type="text/css" media="print">
  <link rel="stylesheet" href="/_assets/v0.9.x/katex.min.css">
      <title>Domácí úloha &bull; BI-PSI &bull; FIT ČVUT Course Pages</title>
      <script src="/_assets/v0.9.x/main.js"></script>
</head>
  <body>
<div class="wrap">
<section class="doc-section level-1"><h2 id="_detailní-specifikace"><a class="anchor" href="#_detailní-specifikace" aria-hidden="true"></a>Detailní specifikace</h2><p>Komunikace mezi serverem a roboty je realizována plně textovým protokolem. Každý příkaz je zakončen dvojicí speciálních symbolů „\a\b“. (Jsou to <strong>dva</strong> znaky '\a' a '\b'.) Server musí dodržet komunikační protokol do detailu přesně, ale musí počítat s nedokonalými firmwary robotů (viz sekce Speciální situace).</p>
<p>Zprávy serveru:</p>
<div class="table-block"><table class="frame-all grid-all"><colgroup><col><col><col></colgroup><tbody><tr><th class="halign-left valign-top">Název</th><th class="halign-left valign-top">Zpráva</th><th class="halign-left valign-top">Popis</th></tr><tr><td class="halign-left valign-top">SERVER_CONFIRMATION</td><td class="halign-left valign-top">&lt;16-bitové číslo v decimální notaci&gt;\a\b</td><td class="halign-left valign-top">Zpráva s potvrzovacím kódem. Může obsahovat maximálně 5 čísel a ukončovací sekvenci \a\b.</td></tr><tr><td class="halign-left valign-top">SERVER_MOVE</td><td class="halign-left valign-top">102 MOVE\a\b</td><td class="halign-left valign-top">Příkaz pro pohyb o jedno pole vpřed</td></tr><tr><td class="halign-left valign-top">SERVER_TURN_LEFT</td><td class="halign-left valign-top">103 TURN LEFT\a\b</td><td class="halign-left valign-top">Příkaz pro otočení doleva</td></tr><tr><td class="halign-left valign-top">SERVER_TURN_RIGHT</td><td class="halign-left valign-top">104 TURN RIGHT\a\b</td><td class="halign-left valign-top">Příkaz pro otočení doprava</td></tr><tr><td class="halign-left valign-top">SERVER_PICK_UP</td><td class="halign-left valign-top">105 GET MESSAGE\a\b</td><td class="halign-left valign-top">Příkaz pro vyzvednutí zprávy</td></tr><tr><td class="halign-left valign-top">SERVER_LOGOUT</td><td class="halign-left valign-top">106 LOGOUT\a\b</td><td class="halign-left valign-top">Příkaz pro ukončení spojení po úspěšném vyzvednutí zprávy</td></tr><tr><td class="halign-left valign-top">SERVER_KEY_REQUEST</td><td class="halign-left valign-top">107 KEY REQUEST\a\b</td><td class="halign-left valign-top">Žádost serveru o Key ID pro komunikaci</td></tr><tr><td class="halign-left valign-top">SERVER_OK</td><td class="halign-left valign-top">200 OK\a\b</td><td class="halign-left valign-top">Kladné potvrzení</td></tr><tr><td class="halign-left valign-top">SERVER_LOGIN_FAILED</td><td class="halign-left valign-top">300 LOGIN FAILED\a\b</td><td class="halign-left valign-top">Nezdařená autentizace</td></tr><tr><td class="halign-left valign-top">SERVER_SYNTAX_ERROR</td><td class="halign-left valign-top">301 SYNTAX ERROR\a\b</td><td class="halign-left valign-top">Chybná syntaxe zprávy</td></tr><tr><td class="halign-left valign-top">SERVER_LOGIC_ERROR</td><td class="halign-left valign-top">302 LOGIC ERROR\a\b</td><td class="halign-left valign-top">Zpráva odeslaná ve špatné situaci</td></tr><tr><td class="halign-left valign-top">SERVER_KEY_OUT_OF_RANGE_ERROR</td><td class="halign-left valign-top">303 KEY OUT OF RANGE\a\b</td><td class="halign-left valign-top">Key ID není v očekávaném rozsahu</td></tr></tbody></table></div>
<p>Zprávy klienta:</p>
<div class="table-block"><table class="frame-all grid-all"><colgroup><col><col><col><col><col></colgroup><tbody><tr><th class="halign-left valign-top">Název</th><th class="halign-left valign-top">Zpráva</th><th class="halign-left valign-top">Popis</th><th class="halign-left valign-top">Ukázka</th><th class="halign-left valign-top">Maximální délka</th></tr><tr><td class="halign-left valign-top">CLIENT_USERNAME</td><td class="halign-left valign-top">&lt;user name&gt;\a\b</td><td class="halign-left valign-top">Zpráva s uživatelským jménem. Jméno může být libovolná sekvence znaků kromě kromě dvojice \a\b.</td><td class="halign-left valign-top">Umpa_Lumpa\a\b</td><td class="halign-left valign-top">20</td></tr><tr><td class="halign-left valign-top">CLIENT_KEY_ID</td><td class="halign-left valign-top">&lt;Key ID&gt;\a\b</td><td class="halign-left valign-top">Zpráva obsahující Key ID. Může obsahovat pouze celé číslo o maximálně třech cifrách.</td><td class="halign-left valign-top">2\a\b</td><td class="halign-left valign-top">5</td></tr><tr><td class="halign-left valign-top">CLIENT_CONFIRMATION</td><td class="halign-left valign-top">&lt;16-bitové číslo v decimální notaci&gt;\a\b</td><td class="halign-left valign-top">Zpráva s potvrzovacím kódem. Může obsahovat maximálně 5 čísel a ukončovací sekvenci \a\b.</td><td class="halign-left valign-top">1009\a\b</td><td class="halign-left valign-top">7</td></tr><tr><td class="halign-left valign-top">CLIENT_OK</td><td class="halign-left valign-top">OK &lt;x&gt; &lt;y&gt;\a\b</td><td class="halign-left valign-top">Potvrzení o provedení pohybu, kde <em>x</em> a <em>y</em> jsou souřadnice robota po provedení pohybového příkazu.</td><td class="halign-left valign-top">OK -3 -1\a\b</td><td class="halign-left valign-top">12</td></tr><tr><td class="halign-left valign-top">CLIENT_RECHARGING</td><td class="halign-left valign-top">RECHARGING\a\b</td><td class="halign-left valign-top">Robot se začal dobíjet a přestal reagovat na zprávy.</td><td class="halign-left valign-top"></td><td class="halign-left valign-top">12</td></tr><tr><td class="halign-left valign-top">CLIENT_FULL_POWER</td><td class="halign-left valign-top">FULL POWER\a\b</td><td class="halign-left valign-top">Robot doplnil energii a opět příjímá příkazy.</td><td class="halign-left valign-top"></td><td class="halign-left valign-top">12</td></tr><tr><td class="halign-left valign-top">CLIENT_MESSAGE</td><td class="halign-left valign-top">&lt;text&gt;\a\b</td><td class="halign-left valign-top">Text vyzvednutého tajného vzkazu. Může obsahovat jakékoliv znaky kromě ukončovací sekvence \a\b.</td><td class="halign-left valign-top">Haf!\a\b</td><td class="halign-left valign-top">100</td></tr></tbody></table></div>
<p>Časové konstanty:</p>
<div class="table-block"><table class="frame-all grid-all"><colgroup><col><col><col></colgroup><tbody><tr><th class="halign-left valign-top">Název</th><th class="halign-left valign-top">Hodnota [s]</th><th class="halign-left valign-top">Popis</th></tr><tr><td class="halign-left valign-top">TIMEOUT</td><td class="halign-left valign-top">1</td><td class="halign-left valign-top">Server i klient očekávají od protistrany odpověď po dobu tohoto intervalu.</td></tr><tr><td class="halign-left valign-top">TIMEOUT_RECHARGING</td><td class="halign-left valign-top">5</td><td class="halign-left valign-top">Časový interval, během kterého musí robot dokončit dobíjení.</td></tr></tbody></table></div>
<p>Komunikaci s roboty lze rozdělit do několika fází:</p>
<section class="doc-section level-2"><h3 id="_autentizace"><a class="anchor" href="#_autentizace" aria-hidden="true"></a>Autentizace</h3><p>Server i klient oba znají pět dvojic autentizačních klíčů (nejedná se o veřejný a soukromý klíč):</p>
<div class="table-block"><table class="frame-all grid-all stretch"><colgroup><col style="width: 33.3333%;"><col style="width: 33.3333%;"><col style="width: 33.3334%;"></colgroup><tbody><tr><th class="halign-left valign-top">Key ID</th><th class="halign-left valign-top">Server Key</th><th class="halign-left valign-top">Client Key</th></tr><tr><td class="halign-left valign-top">0</td><td class="halign-left valign-top">23019</td><td class="halign-left valign-top">32037</td></tr><tr><td class="halign-left valign-top">1</td><td class="halign-left valign-top">32037</td><td class="halign-left valign-top">29295</td></tr><tr><td class="halign-left valign-top">2</td><td class="halign-left valign-top">18789</td><td class="halign-left valign-top">13603</td></tr><tr><td class="halign-left valign-top">3</td><td class="halign-left valign-top">16443</td><td class="halign-left valign-top">29533</td></tr><tr><td class="halign-left valign-top">4</td><td class="halign-left valign-top">18189</td><td class="halign-left valign-top">21952</td></tr></tbody></table></div>
<p>Každý robot začne komunikaci odesláním svého uživatelského jména (zpráva CLIENT_USERNAME). Uživatelské jméno múže být libovolná sekvence 18 znaků neobsahující sekvenci „\a\b“. V dalším kroku vyzve server klienta k odeslání Key ID (zpráva SERVER_KEY_REQUEST), což je vlastně identifikátor dvojice klíčů, které chce použít pro autentizaci. Klient odpoví zprávou CLIENT_KEY_ID, ve které odešle Key ID. Po té server zná správnou dvojici klíčů, takže může spočítat "hash" kód z uživatelského jména podle následujícího vzorce:</p>
<div class="listing-block"><pre>Uživatelské jméno: Mnau!

ASCII reprezentace: 77 110 97 117 33

Výsledný hash: ((77 + 110 + 97 + 117 + 33) * 1000) % 65536 = 40784</pre></div>
<p>Výsledný hash je 16-bitové číslo v decimální podobě. Server poté k hashi přičte klíč serveru tak, že pokud dojde k překročení kapacity 16-bitů, hodnota jednoduše přetečení:</p>
<div class="listing-block"><pre>(40784 + 54621) % 65536 = 29869</pre></div>
<p>Výsledný potvrzovací kód serveru se jako text pošle klientovi ve zprávě SERVER_CONFIRM. Klient z obdrženého kódu vypočítá zpátky hash a porovná ho s očekávaným hashem, který si sám spočítal z uživatelského jména. Pokud se shodují, vytvoří potvrzovací kód klienta. Výpočet potvrzovacího kódu klienta je obdobný jako u serveru, jen se použije klíč klienta:</p>
<div class="listing-block"><pre>(40784 + 45328) % 65536 = 20576</pre></div>
<p>Potvrzovací kód klienta se odešle serveru ve zpráve CLIENT_CONFIRMATION, který z něj vypočítá zpátky hash a porovná jej s původním hashem uživatelského jména. Pokud se obě hodnoty shodují, odešle zprávu SERVER_OK, v opačném prípadě reaguje zprávou SERVER_LOGIN_FAILED a ukončí spojení. Celá sekvence je na následujícím obrázku:</p>
<div class="listing-block"><pre>Klient                  Server
​------------------------------------------
CLIENT_USERNAME     ---&gt;
                    &lt;---    SERVER_KEY_REQUEST
CLIENT_KEY_ID       ---&gt;
                    &lt;---    SERVER_CONFIRMATION
CLIENT_CONFIRMATION ---&gt;
                    &lt;---    SERVER_OK
                              nebo
                            SERVER_LOGIN_FAILED
                      .
                      .
                      .</pre></div>
<p>Server dopředu nezná uživatelská jména. Roboti si proto mohou zvolit jakékoliv jméno, ale musí znát sadu klíčů klienta i serveru. Dvojice klíčů zajistí oboustranou autentizaci a zároveň zabrání, aby byl autentizační proces kompromitován prostým odposlechem komunikace.</p></section>
<section class="doc-section level-2"><h3 id="_pohyb-robota-k-cíli"><a class="anchor" href="#_pohyb-robota-k-cíli" aria-hidden="true"></a>Pohyb robota k cíli</h3><p>Robot se může pohybovat pouze rovně (SERVER_MOVE) a je schopen provést otočení na místě doprava (SERVER_TURN_RIGHT) i doleva (SERVER_TURN_LEFT). Po každém příkazu k pohybu odešle potvrzení (CLIENT_OK), jehož součástí je i aktuální souřadnice. Pozice robota není serveru na začátku komunikace známa. Server musí zjistit polohu robota (pozici a směr) pouze z jeho odpovědí. Z důvodů prevence proti nekonečnému bloudění robota v prostoru, má každý robot omezený počet pohybů (pouze posunutí vpřed). Počet pohybů by měl být dostatečný pro rozumný přesun robota k cíli. Následuje ukázka komunkace. Server nejdříve pohne dvakrát robotem kupředu, aby detekoval jeho aktuální stav a po té jej navádí směrem k cílové souřadnici [0,0].</p>
<div class="listing-block"><pre>Klient                  Server
​------------------------------------------
                  .
                  .
                  .
                &lt;---    SERVER_MOVE
                          nebo
                        SERVER_TURN_LEFT
                          nebo
                        SERVER_TURN_RIGHT
CLIENT_OK       ---&gt;
                &lt;---    SERVER_MOVE
                          nebo
                        SERVER_TURN_LEFT
                          nebo
                        SERVER_TURN_RIGHT
CLIENT_OK       ---&gt;
                &lt;---    SERVER_MOVE
                          nebo
                        SERVER_TURN_LEFT
                          nebo
                        SERVER_TURN_RIGHT
                  .
                  .
                  .</pre></div>
<p>Těsně po autentizaci robot očekává alespoň jeden pohybový příkaz - SERVER_MOVE, SERVER_TURN_LEFT nebo SERVER_TURN_RIGHT! Nelze rovnou zkoušet vyzvednout tajemství. Po cestě k cíli se nachází mnoho překážek, které musí roboti překonat objížďkou. Pro překážky platí následující pravidla:</p>
<div class="ulist"><ul><li>Překážka okupuje vždy jedinou souřadnici.</li><li>Je zaručeno, že každá překážka má prázdné všechny sousední souřadnice (tedy vždy lze jednoduše objet).</li><li>Je zaručeno, že překážka nikdy neokupuje souřadnici [0,0].</li><li>Pokud robot narazí do překážky více než dvacetkrát, poškodí se a ukončí spojení.</li></ul></div>
<p>Překážka je detekována tak, že robot dostane pokyn pro pohyb vpřed (SERVER_MOVE), ale nedojde ke změně souřadnic (zpráva CLIENT_OK obsahuje stejné souřadnice jako v předchozím kroku). Pokud se pohyb neprovede, nedojde k odečtení z počtu zbývajících kroků robota.</p></section>
<section class="doc-section level-2"><h3 id="_vyzvednutí-tajného-vzkazu"><a class="anchor" href="#_vyzvednutí-tajného-vzkazu" aria-hidden="true"></a>Vyzvednutí tajného vzkazu</h3><p>Poté, co robot dosáhne cílové souřadnice [0,0], tak se pokusí vyzvednout tajný vzkaz (zpráva SERVER_PICK_UP). Pokud je robot požádán o vyzvednutí vzkazu a nenachází se na cílové souřadnici, spustí se autodestrukce robota a komunikace se serverem je přerušena. Při pokusu o vyzvednutí na cílově souřadnici reaguje robot zprávou CLIENT_MESSAGE. Server musí na tuto zprávu zareagovat zprávou SERVER_LOGOUT. (Je zaručeno, že tajný vzkaz se nikdy neshoduje se zprávou CLIENT_RECHARGING, pokud je tato zpráva serverem obdržena po žádosti o vyzvednutí jedná se vždy o dobíjení.) Poté klient i server ukončí spojení. Ukázka komunikace s vyzvednutím vzkazu:</p>
<div class="listing-block"><pre>Klient                  Server
​------------------------------------------
                  .
                  .
                  .
                &lt;---    SERVER_PICK_UP
CLIENT_MESSAGE  ---&gt;
                &lt;---    SERVER_LOGOUT</pre></div></section>
<section class="doc-section level-2"><h3 id="_dobíjení"><a class="anchor" href="#_dobíjení" aria-hidden="true"></a>Dobíjení</h3><p>Každý z robotů má omezený zdroj energie. Pokud mu začne docházet baterie, oznámí to serveru a poté se začne sám ze solárního panelu dobíjet. Během dobíjení nereaguje na žádné zprávy. Až skončí, informuje server a pokračuje v činnosti tam, kde přestal před dobíjením. Pokud robot neukončí dobíjení do časového intervalu TIMEOUT_RECHARGING, server ukončí spojení.</p>
<div class="listing-block"><pre>Klient                    Server
​------------------------------------------
CLIENT_USERNAME   ---&gt;
                  &lt;---    SERVER_CONFIRMATION
CLIENT_RECHARGING ---&gt;

      ...

CLIENT_FULL_POWER ---&gt;
CLIENT_OK         ---&gt;
                  &lt;---    SERVER_OK
                            nebo
                          SERVER_LOGIN_FAILED
                    .
                    .
                    .</pre></div>
<p>Další ukázka:</p>
<div class="listing-block"><pre>Klient                  Server
​------------------------------------------
                    .
                    .
                    .
                  &lt;---    SERVER_MOVE
CLIENT_OK         ---&gt;
CLIENT_RECHARGING ---&gt;

      ...

CLIENT_FULL_POWER ---&gt;
                  &lt;---    SERVER_MOVE
CLIENT_OK         ---&gt;
                  .
                  .
                  .</pre></div></section></section>
<section class="doc-section level-1"><h2 id="_chybové-situace"><a class="anchor" href="#_chybové-situace" aria-hidden="true"></a>Chybové situace</h2><p>Někteří roboti mohou mít poškozený firmware a tak mohou komunikovat špatně. Server by měl toto nevhodné chování detekovat a správně zareagovat.</p>
<section class="doc-section level-2"><h3 id="_chyby-při-autentizaci"><a class="anchor" href="#_chyby-při-autentizaci" aria-hidden="true"></a>Chyby při autentizaci</h3><p>Pokud je ve zprávě CLIENT_KEY_ID Key ID, který je mimo očekávaný rozsah (tedy číslo, které není mezi 0-4), tak na to server reaguje chybovou zprávou SERVER_KEY_OUT_OF_RANGE_ERROR a ukončí spojení. Za číslo se pro zjednodušení považují i záporné hodnoty. Pokud ve zprávě CLIENT_KEY_ID není číslo (např. písmena), tak na to server reaguje chybou SERVER_SYNTAX_ERROR.</p>
<p>Pokud je ve zprávě CLIENT_CONFIRMATION číselná hodnota (i záporné číslo), která neodpovídá očekávanému potvrzení, tak server pošle zprávu SERVER_LOGIN_FAILED a ukončí spojení. Pokud se nejedná vůbec o čistě číselnou hodnotu, tak server pošle zprávu SERVER_SYNTAX_ERROR a ukončí spojení.</p></section>
<section class="doc-section level-2"><h3 id="_syntaktická-chyba"><a class="anchor" href="#_syntaktická-chyba" aria-hidden="true"></a>Syntaktická chyba</h3><p>Na syntaktickou chybu reagauje server vždy okamžitě po obdržení zprávy, ve které chybu detekoval. Server pošle robotovi zprávu SERVER_SYNTAX_ERROR a pak musí co nejdříve ukončit spojení. Syntakticky nekorektní zprávy:</p>
<div class="ulist"><ul><li>Příchozí zpráva je delší než počet znaků definovaný pro každou zprávu (včetně ukončovacích znaků \a\b). Délky zpráv jsou definovány v tabulce s přehledem zpráv od klienta.</li><li>Příchozí zpráva syntakticky neodpovídá ani jedné ze zpráv CLIENT_USERNAME, CLIENT_KEY_ID, CLIENT_CONFIRMATION, CLIENT_OK, CLIENT_RECHARGING a CLIENT_FULL_POWER.</li></ul></div>
<p>Každá příchozí zpráva je testována na maximální velikost a pouze zprávy CLIENT_CONFIRMATION, CLIENT_OK, CLIENT_RECHARGING a CLIENT_FULL_POWER jsou testovány na jejich obsah (zprávy CLIENT_USERNAME a CLIENT_MESSAGE mohou obsahovat cokoliv).</p></section>
<section class="doc-section level-2"><h3 id="_logická-chyba"><a class="anchor" href="#_logická-chyba" aria-hidden="true"></a>Logická chyba</h3><p>Logická chyba nastane pouze při nabíjení - když robot pošle info o dobíjení (CLIENT_RECHARGING) a po té pošle jakoukoliv jinou zprávu než CLIENT_FULL_POWER nebo pokud pošle zprávu CLIENT_FULL_POWER, bez předchozího odeslání CLIENT_RECHARGING. Server na takové situace reaguje odesláním zprávy SERVER_LOGIC_ERROR a okamžitým ukončením spojení.</p></section>
<section class="doc-section level-2"><h3 id="_timeout"><a class="anchor" href="#_timeout" aria-hidden="true"></a>Timeout</h3><p>Protokol pro komunikaci s roboty obsahuje dva typy timeoutu:</p>
<div class="ulist"><ul><li>TIMEOUT - timeout pro komunikaci. Pokud robot nebo server neobdrží od své protistrany žádnou komunikaci (nemusí to být však celá zpráva) po dobu tohoto časového intervalu, považují spojení za ztracené a okamžitě ho ukončí.</li><li>TIMEOUT_RECHARGING - timeout pro dobíjení robota. Po té, co server přijme zprávu CLIENT_RECHARGING, musí robot nejpozději do tohoto časového intervalu odeslat zprávu CLIENT_FULL_POWER. Pokud to robot nestihne, server musí okamžitě ukončit spojení.</li></ul></div></section></section>
<section class="doc-section level-1"><h2 id="_speciální-situace"><a class="anchor" href="#_speciální-situace" aria-hidden="true"></a>Speciální situace</h2><p>Při komunikaci přes komplikovanější síťovou infrastrukturu může docházet ke dvěma situacím:</p>
<div class="ulist"><ul><li>Zpráva může dorazit rozdělena na několik částí, které jsou ze socketu čteny postupně. (K tomu dochází kvůli segmentaci a případnému zdržení některých segmentů při cestě sítí.)</li><li>Zprávy odeslané brzy po sobě mohou dorazit téměř současně. Při jednom čtení ze socketu mohou být načteny obě najednou. (Tohle se stane, když server nestihne z bufferu načíst první zprávu dříve než dorazí zpráva druhá.)</li></ul></div>
<p>Za použití přímého spojení mezi serverem a roboty v kombinaci s výkonným hardwarem nemůže k těmto situacím dojít přirozeně, takže jsou testovačem vytvářeny uměle. V některých testech jsou obě situace kombinovány.</p>
<p>Každý správně implementovaný server by se měl umět s touto situací vyrovnat. Firmwary robotů s tímto faktem počítají a dokonce ho rády zneužívají. Pokud se v protokolu vyskytuje situace, kdy mají zprávy od robota předem dané pořadí, jsou v tomto pořadí odeslány najednou. To umožňuje sondám snížit jejich spotřebu a zjednodušuje to implementaci protokolu (z jejich pohledu).</p></section>
<section class="doc-section level-1"><h2 id="_optimalizace-serveru"><a class="anchor" href="#_optimalizace-serveru" aria-hidden="true"></a>Optimalizace serveru</h2><p>Server optimalizuje protokol tak, že nečeká na dokončení zprávy, která je očividně špatná. Například na výzvu k autentizaci pošle robot pouze část zprávy s uživatelským jménem. Server obdrží např. 22 znaků uživatelského jména, ale stále neobdržel ukončovací sekvenci \a\b. Vzhledem k tomu, že maximální délka zprávy je 20 znaků, je jasné, že přijímaná zpráva nemůže být validní. Server tedy zareaguje tak, že nečeká na zbytek zprávy, ale pošle zprávu SERVER_SYNTAX_ERROR a ukončí spojení. V principu by měl postupovat stejně při vyzvedávání tajného vzkazu.</p>
<p>V případě části komunikace, ve které se robot naviguje k cílovým souřadnicím očekává tři možné zprávy: CLIENT_OK, CLIENT_RECHARGING nebo CLIENT_FULL_POWER. Pokud server načte část neúplné zprávy a tato část je delší než maximální délka těchto zpráv, pošle SERVER_SYNTAX_ERROR a ukončí spojení. Pro pomoc při optimalizaci je u každé zprávy v tabulce uvedena její maximální velikost.</p></section>
<section class="doc-section level-1"><h2 id="_ukázka-komunikace"><a class="anchor" href="#_ukázka-komunikace" aria-hidden="true"></a>Ukázka komunikace</h2><div class="listing-block"><pre>C: "Oompa Loompa\a\b"
S: "107 KEY REQUEST\a\b"
C: "0\a\b"
S: "64907\a\b"
C: "8389\a\b"
S: "200 OK\a\b"
S: "102 MOVE\a\b"
C: "OK 0 0\a\b"
S: "102 MOVE\a\b"
C: "OK -1 0\a\b"
S: "104 TURN RIGHT\a\b"
C: "OK -1 0\a\b"
S: "104 TURN RIGHT\a\b"
C: "OK -1 0\a\b"
S: "102 MOVE\a\b"
C: "OK 0 0\a\b"
S: "105 GET MESSAGE\a\b"
C: "Tajny vzkaz.\a\b"
S: "106 LOGOUT\a\b"</pre></div></section>
  </body>
</html>
